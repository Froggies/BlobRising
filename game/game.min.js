// Input 0
(function(){this.app=this.app||{}}).apply(window);var Sylvester={precision:0.001,Vector:function(){}};Sylvester.Vector.create=function(a){return(new Sylvester.Vector).setElements(a)};var $V=Sylvester.Vector.create;Sylvester.Vector.Random=function(a){for(var b=[];a--;)b.push(Math.random());return Sylvester.Vector.create(b)};Sylvester.Vector.Zero=function(a){for(var b=[];a--;)b.push(0);return Sylvester.Vector.create(b)};
Sylvester.Vector.prototype={e:function(a){return 1>a||a>this.elements.length?null:this.elements[a-1]},dimensions:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(a){var b=this.elements.length,a=a.elements||a;if(b!==a.length)return!1;for(;b--;)if(Math.abs(this.elements[b]-a[b])>Sylvester.precision)return!1;return!0},dup:function(){return Sylvester.Vector.create(this.elements)},map:function(a,b){var c=[];this.each(function(d,e){c.push(a.call(b,
d,e))});return Sylvester.Vector.create(c)},forEach:function(a,b){for(var c=this.elements.length,d=0;d<c;d++)a.call(b,this.elements[d],d+1)},toUnitVector:function(){var a=this.modulus();return 0===a?this.dup():this.map(function(b){return b/a})},angleFrom:function(a){var b=a.elements||a;if(this.elements.length!==b.length)return null;var c=0,d=0,e=0;this.each(function(a,g){c+=a*b[g-1];d+=a*a;e+=b[g-1]*b[g-1]});d=Math.sqrt(d);e=Math.sqrt(e);if(0===d*e)return null;a=c/(d*e);-1>a&&(a=-1);1<a&&(a=1);return Math.acos(a)},
isParallelTo:function(a){a=this.angleFrom(a);return null===a?null:a<=Sylvester.precision},isAntiparallelTo:function(a){a=this.angleFrom(a);return null===a?null:Math.abs(a-Math.PI)<=Sylvester.precision},isPerpendicularTo:function(a){a=this.dot(a);return null===a?null:Math.abs(a)<=Sylvester.precision},add:function(a){var b=a.elements||a;return this.elements.length!==b.length?null:this.map(function(c,d){return c+b[d-1]})},subtract:function(a){var b=a.elements||a;return this.elements.length!==b.length?
null:this.map(function(c,d){return c-b[d-1]})},multiply:function(a){return this.map(function(b){return b*a})},dot:function(a){var a=a.elements||a,b=0,c=this.elements.length;if(c!==a.length)return null;for(;c--;)b+=this.elements[c]*a[c];return b},cross:function(a){a=a.elements||a;if(3!==this.elements.length||3!==a.length)return null;var b=this.elements;return Sylvester.Vector.create([b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0]])},max:function(){for(var a=0,b=this.elements.length;b--;)Math.abs(this.elements[b])>
Math.abs(a)&&(a=this.elements[b]);return a},indexOf:function(a){for(var b=null,c=this.elements.length,d=0;d<c;d++)null===b&&this.elements[d]===a&&(b=d+1);return b},toDiagonalMatrix:function(){return Sylvester.Matrix.Diagonal(this.elements)},round:function(){return this.map(function(a){return Math.round(a)})},snapTo:function(a){return this.map(function(b){return Math.abs(b-a)<=Sylvester.precision?a:b})},distanceFrom:function(a){if(a.anchor||a.start&&a.end)return a.distanceFrom(this);var b=a.elements||
a;if(b.length!==this.elements.length)return null;var c=0,d;this.each(function(a,f){d=a-b[f-1];c+=d*d});return Math.sqrt(c)},liesOn:function(a){return a.contains(this)},liesIn:function(a){return a.contains(this)},rotate:function(a,b){var c,d=null,e,f;a.determinant&&(d=a.elements);switch(this.elements.length){case 2:c=b.elements||b;if(2!==c.length)return null;d||(d=Sylvester.Matrix.Rotation(a).elements);e=this.elements[0]-c[0];f=this.elements[1]-c[1];return Sylvester.Vector.create([c[0]+d[0][0]*e+d[0][1]*
f,c[1]+d[1][0]*e+d[1][1]*f]);case 3:if(!b.direction)return null;var g=b.pointClosestTo(this).elements;d||(d=Sylvester.Matrix.Rotation(a,b.direction).elements);e=this.elements[0]-g[0];f=this.elements[1]-g[1];c=this.elements[2]-g[2];return Sylvester.Vector.create([g[0]+d[0][0]*e+d[0][1]*f+d[0][2]*c,g[1]+d[1][0]*e+d[1][1]*f+d[1][2]*c,g[2]+d[2][0]*e+d[2][1]*f+d[2][2]*c]);default:return null}},reflectionIn:function(a){if(a.anchor){var b=this.elements.slice(),a=a.pointClosestTo(b).elements;return Sylvester.Vector.create([a[0]+
(a[0]-b[0]),a[1]+(a[1]-b[1]),a[2]+(a[2]-(b[2]||0))])}var c=a.elements||a;return this.elements.length!==c.length?null:this.map(function(d,b){return c[b-1]+(c[b-1]-d)})},to3D:function(){var a=this.dup();switch(a.elements.length){case 3:break;case 2:a.elements.push(0);break;default:return null}return a},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(a){this.elements=(a.elements||a).slice();return this}};Sylvester.Vector.prototype.x=Sylvester.Vector.prototype.multiply;
Sylvester.Vector.prototype.each=Sylvester.Vector.prototype.forEach;Sylvester.Vector.i=Sylvester.Vector.create([1,0,0]);Sylvester.Vector.j=Sylvester.Vector.create([0,1,0]);Sylvester.Vector.k=Sylvester.Vector.create([0,0,1]);var logLevel=2,devName="m@n",className="";console.log("Logs start for "+devName+" with "+logLevel+" level");
var maps=[{menuEntities:[{"class":"Source",nb:5},{"class":"Wall",nb:5},{"class":"Well",nb:5,nbBlobMax:10}],staticEntities:[{"class":"Well",shape:{x:300,y:200}}],startSource:{degreeBlob:40,shape:{x:50,y:100}},endWell:{shape:{x:500,y:100}}},{menuEntities:[{"class":"Source",nb:5},{"class":"Wall",nb:5},{"class":"Well",nb:5,nbBlobMax:10}],staticEntities:[{"class":"Well",shape:{x:200,y:200}}],startSource:{degreeBlob:60,shape:{x:50,y:100}},endWell:{shape:{x:500,y:100}}}];
(function(){app.js={};app.js.isDefined=function(b){return"undefined"!==typeof b&&null!==b};var a={}.hasOwnProperty;app.js.inherit=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);d.prototype=c.prototype;b.prototype=new d;b.parent=c.prototype;return b};app.js.stringToClass=function(b){for(var b=b.split("."),c=window||this,d=0,a=b.length;d<a;d++)c=c[b[d]];if("function"!==typeof c)throw Error("function not found");return c};app.js.deserialize=function(b,c){var d=
{};app.js.isDefined(b)&&app.js.isDefined(b["class"])?d=new (app.js.stringToClass("app.entities."+b["class"])):app.js.isDefined(c)&&(d=c);for(var a in b)if(b[a]instanceof Array){app.js.isDefined(d[a])||(d[a]=[]);for(var f in b[a])d[a].push(app.js.deserialize(b[a][f]))}else d[a]="object"==typeof b[a]?app.js.deserialize(b[a],d[a]):b[a];return d};app.js.clone=function(a){return app.js.deserialize(a)};app.js.arrayRemove=function(a,c){app.js.isDefined(a)||console.trace();var d=a.indexOf(c);-1!=d&&a.splice(d,
1);return-1!=d};app.js.getObjectClass=function(a){if(a&&a.constructor&&a.constructor.toString&&(a=a.constructor.toString().match(/function\s*(\w+)/))&&2==a.length)return a[1]};app.js.log=function(a,c,d,e,f){a==logLevel&&-1<c.indexOf(devName)&&(""==className?console.log(d):app.js.isDefined(e)&&app.js.getObjectClass(e)==className&&console.log(d),app.js.isDefined(f)&&!0===f&&console.trace())}})();
(function(){app.shapes=app.shapes||{};var a=app.shapes,b=function(c,d,a,b,g,i,h){this.x=c;this.y=d;this.width=a;this.height=b;this.fill=g;this.gradient=i;this.color=h};b.prototype.drawGradient=function(c,d){var a;if(!0===d){var b=c.createLinearGradient(this.x,this.y,this.x+this.width,this.y);a=["rgba(0,0,0,0)",this.color,"rgba(0,0,0,0)"]}else{var g;!0===this.fill?(b=this.width/4,g=this.width,a=[this.color,"rgba(0,0,0,0)",this.color]):(b=this.width/2,g=0,a=["rgba(255,255,255,0)",this.color,"rgba(255,255,255,0)"]);
b=c.createRadialGradient(this.x,this.y,g,this.x,this.y,b)}b.addColorStop("0",a[0]);b.addColorStop("0.5",a[1]);b.addColorStop("1.0",a[2]);return b};a.Shape=b})();
(function(){var a=app.js.inherit,b=app.shapes,c=function(){c.parent.constructor.apply(this,arguments)};a(c,app.shapes.Shape);c.prototype.draw=function(a){a.save();!0===this.fill?(a.fillStyle=!0===this.gradient?c.parent.drawGradient.call(this,a,!0):this.color,a.fillRect(this.x,this.y,this.width,this.height)):(a.strokeStyle=!0===this.gradient?c.parent.drawGradient.call(this,a,!0):this.color,a.strokeRect(this.x,this.y,this.width,this.height));a.restore()};b.Rectangle=c})();
(function(){var a=app.js.inherit,b=app.shapes,c=function(){c.parent.constructor.apply(this,arguments)};a(c,app.shapes.Shape);c.prototype.draw=function(a){a.beginPath();a.arc(this.x,this.y,this.width/2,0,2*Math.PI,!1);a.closePath();!0===this.fill?(a.fillStyle=!0===this.gradient?c.parent.drawGradient.call(this,a,!1):this.color,a.fill()):!0===this.gradient?(a.fillStyle=c.parent.drawGradient.call(this,a,!1),a.fill()):(a.strokeStyle=this.color,a.stroke())};b.Ellipse=c})();
(function(){app.physics={};var a=app.physics,b=function(a,d,b){this.entity=a;this.speed=d;d=Math.PI*b/180;a=Number(Math.cos(d).toFixed(2));d=Number(Math.sin(d).toFixed(2));this.angle=$V([a,d])};b.prototype.update=function(a,d,b){var a=this.entity.shape.x,f=this.entity.shape.y,g=this.entity.shape.height,i=this.entity.shape.width,h=f+this.speed*this.angle.elements[1],j=Number((a+this.speed*this.angle.elements[0]).toFixed(2)),h=Number(h.toFixed(2));this.entity.shape.x=j;this.entity.shape.y=h;0>=f?this.angle=
$V([this.angle.elements[0],1]):0>=a?this.angle=$V([1,this.angle.elements[1]]):0>=f||f>=b-g?this.angle=$V([this.angle.elements[0],-1]):a>=d-i&&(this.angle=$V([-1,this.angle.elements[1]]))};a.Physic=b})();
(function(){var a=app.physics,b=function(){};b.prototype.isCollision=function(a,d){var b=a.shape.x,f=a.shape.y,g=a.shape.height,i=a.shape.width,h=d.shape.x,j=d.shape.y,k=d.shape.height;return h+d.shape.width<b||h>b+i||j+k<f||j>f+g?!1:!0};b.prototype.isInRaduis=function(a,d){if(0<d.radius){var b=a.shape.x,f=a.shape.y,g=a.shape.height,i=a.shape.width,h=d.shape.x-d.radius/4,j=d.shape.y-d.radius/4,k=d.radius;if(!(h+d.radius<b||h>b+i||j+k<f||j>f+g))return!0}return!1};b.prototype.nextDirection=function(a,
d){var b=a.shape.x,f=a.shape.y,g=d.shape.x,i=d.shape.y;relativX=g-b;relativZ=i-f;var h=Math.atan2(relativZ,relativX)/(Math.PI/180),j=Math.cos(h),h=Math.sin(h);b<g&&f<i?(app.js.log(1,"m@n","gauche dessus",this),b=$V([-j,-h])):b<g&&f>i?(app.js.log(1,"m@n","gauche dessous",this),b=$V([j,-h])):b>g&&f<i?(app.js.log(1,"m@n","droite dessus",this),b=$V([-j,h])):(app.js.log(1,"m@n","droite dessous",this),b=$V([j,h]));"Well"==app.js.getObjectClass(d)&&1>a.physic.angle.angleFrom(b)&&(a.physic.angle=b)};b.prototype.pointDistant=
function(a,b){var e=a.shape.center.y,f=b.shape.center.y;return Math.sqrt(Math.pow(b.shape.center.x-a.shape.center.x,2)+Math.pow(f-e,2))};a.Collision=b})();
(function(){app.entities=app.entities||{};var a=app.entities,b=function(){this.age=0;this.imAlive=!0;this.shape=new app.shapes.Rectangle;this.collision=new app.physics.Collision;this.radius=0};b.prototype.update=function(a,b){this.incrementMyAge(b)};b.prototype.draw=function(a,b){if(app.js.isDefined(this.radius)&&app.js.isDefined(b)&&b.showNoneEntities){var e=new app.shapes.Ellipse;e.x=this.shape.x+this.shape.width/2;e.y=this.shape.y+this.shape.height/2;e.width=this.radius;e.height=this.radius;e.color=
"rgba(0,0,0,1)";a.save();a.shadowColor=this.shape.color;a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=6;e.draw(a);a.restore()}this.shape.draw(a)};b.prototype.incrementMyAge=function(){this.age++};b.prototype.dead=function(a){this.imAlive=!1;app.js.arrayRemove(a.staticEntities,this)};b.prototype.isCollision=function(a){return this.collision.isCollision(this,a)};a.Entity=b})();
(function(){var a=app.js.inherit,b=app.entities,c=function(a,b){c.parent.constructor.apply(this);this.maxAge=100;this.shape=new app.shapes.Ellipse(0,0,a,b,!1,!0,"#FF0000");this.initialWidth=a;this.initialHeight=b};a(c,app.entities.Entity);c.prototype.incrementMyAge=function(a){c.parent.incrementMyAge.call(this,a);this.age<this.maxAge&&0<this.shape.width?(this.shape.width=this.initialWidth-this.initialWidth/this.maxAge*this.age,this.shape.height=this.initialHeight-this.initialHeight/this.maxAge*this.age):
this.dead(a)};c.prototype.dead=function(a){this.imAlive=!1;app.js.arrayRemove(a.noneEntities,this)};b.Molecule=c})();
(function(){var a=app.js.inherit,b=app.entities,c=function(a,b,f){c.parent.constructor.apply(this,arguments);this.nbBlob=100;this.maxAge=1E3;this.physic=new app.physics.Physic(this,2,f);this.shape=new app.shapes.Ellipse(0,0,a,b,!0,!0,"#00FF00");this.timeToLostMolecule=Number((this.maxAge/this.nbBlob).toFixed(0))};a(c,app.entities.Molecule);c.prototype.update=function(a,b,f){for(var g in f.staticEntities){var i=f.staticEntities[g],h=this.isCollision(i);"Wall"==app.js.getObjectClass(i)&&h?this.dead(f):
"Well"==app.js.getObjectClass(i)&&h&&(this.dead(f),i.nbBlob++);h=this.collision.isInRaduis(this,i);"Well"==app.js.getObjectClass(i)&&h&&this.collision.nextDirection(this,i)}this.isBirthday()&&0<this.nbBlob&&(this.nbBlob--,f.showNoneEntities&&(g=new app.entities.Molecule(this.shape.width,this.shape.height),g.shape.x=this.shape.x,g.shape.y=this.shape.y,f.noneEntities.push(g)));this.physic.update(a,b.canvas.width,b.canvas.height);c.parent.update.call(this,a,f)};c.prototype.isBirthday=function(){return 0==
this.age%this.timeToLostMolecule&&this.imAlive};c.prototype.dead=function(a){this.imAlive=!1;app.js.arrayRemove(a.blobEntities,this)};b.Blob=c})();
(function(){var a=app.js.inherit,b=app.entities,c=function(){c.parent.constructor.apply(this);this.nbBlob=10;this.maxAge=this.lostTime=100;this.degreeBlob=120;this.shape=new app.shapes.Rectangle(0,0,50,35,!0,!0,"#00FFFF");this.timeToLostMolecule=Number((this.maxAge/this.nbBlob).toFixed(0))};a(c,app.entities.Entity);c.prototype.update=function(a,b){if(this.isBirthday()&&0<this.nbBlob){this.nbBlob--;var f=new app.entities.Blob(30,30,this.degreeBlob);f.shape.x=this.shape.x+this.shape.width/2;f.shape.y=
this.shape.y+this.shape.height/2;b.blobEntities.push(f)}c.parent.update.call(this,a,b)};c.prototype.isBirthday=function(){return 0==this.age%this.lostTime};b.Source=c})();(function(){var a=app.js.inherit,b=app.entities,c=function(){c.parent.constructor.apply(this);this.shape=new app.shapes.Rectangle(0,0,50,50,!0,!0,"#F0F0F0")};a(c,app.entities.Entity);c.prototype.update=function(a,b){c.parent.update.call(this,a,b)};b.Wall=c})();
(function(){var a=app.js.inherit,b=app.entities,c=function(){c.parent.constructor.apply(this);this.nbBlobMax=5;this.nbBlob=0;this.last=!1;this.shape=new app.shapes.Rectangle(0,0,50,35,!0,!0,"#FF30F0");this.radius=Math.max(this.shape.width,this.shape.height)+80};a(c,app.entities.Entity);c.prototype.update=function(a,b){this.nbBlobMax<=this.nbBlob&&!0!==this.last?this.dead(b):c.parent.update.call(this,a,b)};b.Well=c})();
(function(){app.Map={};var a=app,b=function(){this.showNoneEntities=!0;this.staticEntities=[];this.menuEntities=[];this.blobEntities=[];this.noneEntities=[];this.startSource=new app.entities.Source;this.endWell=new app.entities.Well;this.endWell.last=!0;this.staticEntities.push(this.startSource);this.staticEntities.push(this.endWell)};b.prototype.draw=function(a,b){for(var e=this.staticEntities.length,f,g=0;g<e;g++)f=this.staticEntities[g],app.js.isDefined(f)&&(app.js.isDefined(b)&&!0===b&&f.update($V([1,
1]),this),f.draw(a,this));e=this.blobEntities.length;for(g=0;g<e;g++)f=this.blobEntities[g],app.js.isDefined(f)&&(app.js.isDefined(b)&&!0===b&&f.update($V([1,1]),a,this),f.draw(a,this));if(this.showNoneEntities){e=this.noneEntities.length;for(g=0;g<e;g++)f=this.noneEntities[g],app.js.isDefined(f)&&(app.js.isDefined(b)&&!0===b&&f.update($V([1,1]),this),f.draw(a,this))}};b.prototype.isFinish=function(){return 0==this.startSource.nbBlob&&0==this.blobEntities.length};b.prototype.isWin=function(){return 0<
this.endWell.nbBlob};a.Map=b})();
(function(){var a=app,b=function(a,b){this.loop={};this.currentIndexMap=0;this.listSerializedMap=a;this.canvas=b;this.context=b.getContext("2d");this.timeLoop=50;this.init()};b.prototype.init=function(){this.currentMap=app.js.deserialize(this.listSerializedMap[this.currentIndexMap],new app.Map);this.currentMap.draw(this.context,!1)};b.prototype.clear=function(){this.context.canvas.width=this.context.canvas.width};b.prototype.start=function(){var a=this;this.loop=setInterval(function(){a.currentMap.isFinish()?a.end():
(a.clear(),a.currentMap.draw(a.context,!0))},1E3/this.timeLoop);this.isRun=!0};b.prototype.pause=function(){this.isRun=!1;clearInterval(this.loop)};b.prototype.end=function(){clearInterval(this.loop);this.isRun=!1;this.currentMap.isWin()&&this.currentIndexMap+1<this.listSerializedMap.length?(window.alert("WITH "+this.currentMap.endWell.nbBlob+" BLOB, YOU WIN LEVEL !!"),this.currentIndexMap+=1,this.init(),this.start()):this.currentMap.isWin()?window.alert("YOU WIN GAME !!"):(window.alert("YOU LOOSE !!"),
this.init(),this.start())};a.Game=b})();
(function(){var a=app,b=function(a,b,e,f){this.isSelected=!1;this.menuContainer=a;this.entity=b;this.nb=e;this.callback=f;this.buildMainDiv();this.buildCanvasEntity();this.updateDisplayName();a.divMenu.appendChild(this.div);var g=this;a.game.canvas.addEventListener("mousedown",function(a){app.MenuItem.prototype.onCanvasClick.call(g,a)},!1)};b.prototype.buildMainDiv=function(){this.div=document.createElement("div");this.div.id="btn"+name;this.div.style.color="white";this.div.style.border="1px solid white";
var a=this;this.div.onclick=function(){app.MenuItem.prototype.onClick.call(a)};this.div.style.display="block";this.div.style.width="80%";this.div.style.height="50px";this.div.style.margin="auto"};b.prototype.buildCanvasEntity=function(){this.canvas=document.createElement("canvas");this.canvas.width=50;this.canvas.height=40;this.canvas.style.marginLeft="5px";this.canvas.style.marginTop="5px";this.div.appendChild(this.canvas);this.entity.shape.x=0;this.entity.shape.y=0;this.entity.draw(this.canvas.getContext("2d"))};
b.prototype.onClick=function(){(this.isSelected=!this.isSelected)?(this.div.style.color="red",app.js.isDefined(this.callback)&&this.callback.call(this.menuContainer,this)):this.div.style.color="white"};b.prototype.unselect=function(){this.isSelected=!1;this.div.style.color="white"};b.prototype.onCanvasClick=function(a){if(this.isSelected&&0<this.nb){this.nb--;this.updateDisplayName();var b=this.menuContainer.game.canvas,e=a.clientX-document.documentElement.scrollLeft-b.offsetLeft,a=a.clientY-document.documentElement.scrollTop-
b.offsetTop,f=app.js.clone(this.entity);f.shape.x=e;f.shape.y=a;f.draw(b.getContext("2d"));this.menuContainer.game.currentMap.staticEntities.push(f)}};b.prototype.updateDisplayName=function(){app.js.isDefined(this.divName)||(this.divName=document.createElement("div"),this.divName.style.display="inline-block",this.divName.style.verticalAlign="top",this.divName.style.paddingTop="15px",this.divName.style.cursor="default",this.div.appendChild(this.divName));this.displayName=app.js.getObjectClass(this.entity)+
"("+this.nb+")";this.divName.innerHTML=this.displayName};a.MenuItem=b})();
(function(){var a=app,b=function(a){this.entitySelected="";this.game=a;this.menuItems=[];this.divMenu=document.createElement("div");this.divMenu.style.display="inline-block";this.divMenu.style.verticalAlign="top";this.divMenu.style.width="17%";this.divMenu.appendChild(this.createToggleButton("Start",function(){a.isRun?(this.innerHTML="Restart",a.pause()):(this.innerHTML="Pause",a.start());new app.editor.Serialization(a.currentMap)}));this.divMenu.appendChild(this.createToggleButton("Show none entities",
function(){a.currentMap.showNoneEntities=!a.currentMap.showNoneEntities;a.currentMap.showNoneEntities||(a.currentMap.noneEntities=[])}));this.createSliderTime(a);this.load(a.currentMap)};b.prototype.load=function(a){for(var b in a.menuEntities){var e=a.menuEntities[b],e=new app.MenuItem(this,e,e.nb,this.clickItemMenu);this.menuItems.push(e)}document.body.appendChild(this.divMenu)};b.prototype.clickItemMenu=function(a){for(var b in this.menuItems){var e=this.menuItems[b];e!=a&&e.unselect()}};b.prototype.createToggleButton=
function(a,b){var e=document.createElement("div");e.id="btn"+a;e.style.color="white";e.style.border="1px solid white";e.innerHTML=a;e.onclick=b;e.style.display="block";e.style.width="80%";e.style.height="50px";e.style.margin="auto";return e};b.prototype.createSliderTime=function(a){var b=document.createElement("div");b.style.color="white";b.style.border="1px solid white";b.style.display="block";b.style.width="80%";b.style.height="50px";b.style.margin="auto";var e=document.createElement("input");e.type=
"range";e.min=10;e.max=850;e.value=50;e.step=10;e.style.display="block";e.style.width="80%";e.style.margin="auto";e.onchange=function(){a.timeLoop=e.value;a.pause();a.start()};b.appendChild(e);this.divMenu.appendChild(b)};a.Menu=b})();
(function(){app.editor=app.editor||{};var a=app.editor,b=function(a){a=JSON.stringify(this.reduce(a));this.divMenu=document.createElement("div");this.divMenu.style.display="inline-block";this.divMenu.style.verticalAlign="top";this.divMenu.style.width="100%";this.divMenu.style.height="17%";this.divMenu.style.color="white";this.divMenu.innerHTML=a;document.body.appendChild(this.divMenu)};b.prototype.reduce=function(a){var b={menuEntities:[]},e;for(e in a.menuEntities){var f=a.menuEntities[e];b.menuEntities.push({"class":f["class"],
nb:f.nb})}b.staticEntities=[];for(e in a.staticEntities)f=a.staticEntities[e],b.staticEntities.push({"class":f["class"],shape:{x:f.shape.x,y:f.shape.y}});b.startSource={degreeBlob:a.startSource.degreeBlob,shape:{x:a.startSource.shape.x,y:a.startSource.shape.y}};b.endWell={shape:{x:a.endWell.shape.x,y:a.endWell.shape.y}};return b};a.Serialization=b})();
(function(){var a=document.createElement("canvas"),b=new app.Game(maps,a);document.body.style.backgroundColor="black";var c=window.innerWidth,d=window.innerHeight;a.style.display="inline";a.id="canvas";a.width=parseInt(0.8*c);a.height=d-21;a.style.border="1px solid white";document.body.appendChild(a);new app.Menu(b);c=document.createElement("div");c.style.position="absolute";c.style.border="1px solid white";c.style.width="98%";c.style.height="98%";c.style.top="0.5%";c.style.left="0.5%";c.style.backgroundColor=
"white";d=document.createElement("div");d.style.width="0";d.style.height="0";d.style.borderTop="80px solid transparent";d.style.borderBottom="80px solid transparent";d.style.borderLeft="80px solid red";d.style.position="absolute";d.style.top="45%";d.style.left="45%";c.appendChild(d);document.body.appendChild(c);d=document.createElement("div");d.innerHTML="This is a blob, for win, help it to join well !";d.style.position="absolute";d.style.top="5%";d.style.left="5%";document.body.appendChild(d);var e=
document.createElement("div");e.innerHTML="For that, you can use some machinery, each of them can change the trajectory of the blob !";e.style.width="300px";e.style.position="absolute";e.style.top="5%";e.style.right="5%";document.body.appendChild(e);c.style.display="none";d.style.display="none";e.style.display="none";b.init();window.onresize=function(){var c=window.innerHeight;a.width=parseInt(0.8*window.innerWidth);a.height=c-21;b.currentMap.draw(a.getContext("2d"),!1)}})();
